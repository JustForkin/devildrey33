<!-- 
    Plantilla para test de canvas creado por Josep Antoni Bover Comas el 05/07/2016

        Vista por defecto en el Laboratorio de pruebas  
		devildrey33_Lab->Opciones->Vista = Filas;

        Ultima modificación el 05/02/2017
-->
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
        <title>Experimento Three.js</title>
        <!-- Estilos CSS para el test -->
        <link rel='stylesheet' href='/Ejemplos/Utils/ObjetoCanvas.css' />        
        
        <!-- Estilos CSS para el ObjetoTest -->
        <!-- <link rel='stylesheet' href='/Ejemplos/Utils/ObjetoTest.css' /> -->
        
        <!-- Si deseas utilizar JQuery descomenta la siguiente línea -->
        <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> -->
        <!-- Three.JS -->
        <script src="/Web/JS/3rdParty/three-0.84.min.js"></script>
<!--        <script src="/Web/JS/3rdParty/three-0.79.min.js"></script> -->
        <!-- Three.JS para depuración -->
        <!-- <script src="/Web/JS/3rdParty/three-0.79.js"></script> -->

        <!-- ObjetoCanvas similar al ObjetoBanner para testear Banners -->
        <script src="/Ejemplos/Utils/ObjetoCanvas.js"></script>
        
        <!-- Objeto para crear animaciones de tiempo -->
        <!-- <script src="/Ejemplos/Utils/ObjetoAnimacion.js"></script> -->
        
        <!-- Objeto para crear tests rápidos -->
        <!-- <script src="/Ejemplos/Utils/ObjetoTest.js"></script> -->
        
        <!-- Código javascript --> 
<script type="text/javascript">
/* Plantilla para crear banners animados en devildrey33.es */

// Constructor
var NUEVOCANVASTHREE = function() {
    // Llamo al constructor del ObjetoBanner
    if (ObjetoCanvas.call(this, { 
        'Tipo'          : 'THREE',
        'Ancho'         : 'Auto',
        'Alto'          : 'Auto',
        'Entorno'       : 'Normal',
        'MostrarFPS'    : true,
        'ElementoRaiz'  : document.body,
        'Pausar'        : true,             // Pausa el canvas si la pestaña no tiene el foco del teclado
        'ColorFondo'    : 0xFFFFFF
    }) === false) { return false; }
    
    // Se ha creado el canvas, inicio los valores de la animación ... 
    this.Iniciar();
    
    // Esconde la ventana que informa al usuario de que se está cargando la animación. (REQUERIDO)
    this.Cargando(false);
};

NUEVOCANVASTHREE.prototype = Object.assign( Object.create(ObjetoCanvas.prototype) , {
    constructor     : NUEVOCANVASTHREE, 
    // Función que se llama al redimensionar el documento
    Redimensionar   : function() {    },
    // Función que se llama al hacer scroll en el documento    
    Scroll          : function() {    },
    // Función que se llama al mover el mouse por el canvas
    MouseMove       : function(Evento) { },
    // Función que se llama al presionar un botón del mouse por el canvas
    MousePresionado : function(Evento) { },
    // Función que se llama al soltar un botón del mouse por el canvas
    MouseSoltado    : function(Evento) { },
    // Función que se llama al entrar con el mouse en el canvas
    MouseEnter      : function(Evento) { },
    // Función que se llama al salir con el mouse del canvas
    MouseLeave      : function(Evento) { },
    // Función que se llama al presionar una tecla
    TeclaPresionada : function(Evento) { },
    // Función que se llama al soltar una tecla
    TeclaSoltada    : function(Evento) { },
    // Función que se llama al presionar la pantalla
    TouchStart      : function(Evento) { },
    // Función que se llama al soltar el dedo de la pantalla
    TouchEnd        : function(Evento) { },    
    // Función que se llama al pausar el banner
    Pausa           : function() { },
    // Función que se llama al reanudar el banner
    Reanudar        : function() { },
    // Función que inicia el ejemplo
    Iniciar         : function() {
        this.Escena = new THREE.Scene();
        this.Camara = new THREE.PerspectiveCamera(75, this.Ancho / this.Alto, 0.5, 1000);
        this.Camara.Rotacion = { Grados : -180 * (Math.PI / 180), Avance : (Math.PI / 180) / 3, Distancia : 50, MirarHacia : new THREE.Vector3(0, 0, 0), Animacion : true };
        this.Camara.position.set(0, 0, this.Camara.Rotacion.Distancia);        
        // Función para que la cámara rote alrededor de la escena
        this.Camara.Rotar = function() {
            if (this.Rotacion.Animacion === true) {
                this.Rotacion.Grados += this.Rotacion.Avance;
                this.position.x = this.Rotacion.Distancia * Math.cos(this.Rotacion.Grados);
                this.position.z = this.Rotacion.Distancia * Math.sin(this.Rotacion.Grados);
                this.lookAt(this.Rotacion.MirarHacia); 
            }
        };
        this.Escena.add(this.Camara);

        // Parrilla para iniciar la plantilla (se puede eliminar)
        this.Parrilla = new THREE.GridHelper(10, 10, new THREE.Color(0xcccccc), new THREE.Color(0x999999));
        this.Parrilla.position.y = -4;
        this.Escena.add(this.Parrilla);

        this.Cubo = new THREE.Mesh(new THREE.BoxGeometry( 4, 4, 4 ), new THREE.MeshBasicMaterial( { color: "rgb(150,0,0)", wireframe : true } ));
        this.Escena.add(this.Cubo);
        this.Rotacion_Grados    = 0;
        this.Rotacion_Avance    = 0.005;
        this.Rotacion_Distancia = 20;
        this.Camara.position.set(0, 0, this.Rotacion_Distancia);        
    },
    
    // Función que pinta cada frame de la animación
    Pintar          : function() {  
        this.Camara.Rotar();
        this.Context.render(this.Escena, this.Camara);  
    }
});

// Inicialización del canvas en el Load de la página
var Canvas = null;
window.addEventListener('load', function() { Canvas = new NUEVOCANVASTHREE; });
</script>
    </head>
    <body>
    </body>
</html>